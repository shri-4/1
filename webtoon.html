<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title></title>
  <style>
    :root{
      color-scheme: dark;
      --playerH: 62px;
      --viewerW: 720px; /* PCì—ì„œ ë„¤ì´ë²„ì›¹íˆ° ëŠë‚Œ í­ */
    }
    *{ box-sizing: border-box; }
    body{
      margin:0;
      background:#0b0b0f;
      color:#eaeaf2;
      font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
      overflow-x:hidden;
    }

    /* ìƒë‹¨ ê³ ì • í”Œë ˆì´ì–´ */
    .playerbar{
      position:fixed;
      top:0; left:0; right:0;
      z-index:999;
      height: var(--playerH);
      display:flex;
      align-items:center;
      background: rgba(11,11,15,.88);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,.10);
      padding: 10px 12px;
    }
    .player{
      width:100%;
      max-width: 1100px;
      margin:0 auto;
      display:grid;
      grid-template-columns: auto 1fr auto;
      gap:10px;
      align-items:center;
    }
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.08);
      color:#fff;
      padding:8px 12px;
      border-radius:12px;
      font-weight:800;
      cursor:pointer;
    }
    .btn:active{ transform: translateY(1px); }

    .progWrap{ display:grid; gap:6px; }
    .timeRow{
      display:flex;
      justify-content:space-between;
      font-size:12px;
      opacity:.85;
      padding:0 2px;
      gap:10px;
      white-space: nowrap;
    }
    input[type="range"]{ width:100%; accent-color:white; }

    /* ì›¹íˆ° ë·°ì–´ */
    main{
      padding-top: calc(var(--playerH) + 10px);
      padding-bottom: 48px;
    }
    .viewer{
      width: min(var(--viewerW), 100%);
      margin: 0 auto;
      padding: 0 10px;
    }

    /* ì•ˆë‚´ ë¬¸êµ¬(ë³¸ë¬¸ ìµœìƒë‹¨, ìŠ¤í¬ë¡¤í•˜ë©´ ì‚¬ë¼ì§) */
    .notice{
      margin: 6px auto 16px;
      font-size: 12px;
      line-height: 1.6;
      opacity: .68;
      border-left: 2px solid rgba(255,255,255,.25);
      padding-left: 10px;
    }

    .page{
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      margin: 0 0 14px;
    }
    .page img{
      width: 100%;
      height: auto;  /* âœ… PCì—ì„œ â€œì „ì²´ê°€ ë‹¤ ë³´ì´ê²Œâ€ */
      display:block;
      user-select:none;
      -webkit-user-drag:none;
    }

    footer{
      width: min(var(--viewerW), 100%);
      margin: 18px auto 0;
      padding: 18px 10px;
      border-top: 1px solid rgba(255,255,255,.10);
    }
    .links{ display:flex; flex-direction:column; gap:10px; }
    a.link{
      width: fit-content;
      color:#eaeaf2;
      text-decoration:none;
      border-bottom:1px solid rgba(234,234,242,.35);
      padding-bottom:2px;
      font-weight:800;
    }
    a.link:hover{ border-bottom-color: rgba(234,234,242,.85); }

    /* ì‘ì€ í™”ë©´ì—ì„œ í”Œë ˆì´ì–´ 2ì¤„ */
    @media (max-width: 420px){
      :root{ --playerH: 92px; }
      .player{
        grid-template-columns:auto 1fr;
        grid-template-rows:auto auto;
      }
      .progWrap{ grid-column: 1 / -1; }
      .timeRow{ font-size:11px; }
    }
  </style>
</head>

<body>

  <!-- ìƒë‹¨ ê³ ì • í”Œë ˆì´ì–´ -->
  <div class="playerbar">
    <div class="player">
      <button class="btn" id="playBtn" aria-label="ì¬ìƒ/ì •ì§€">â–¶</button>

      <div class="progWrap">
        <input id="progress" type="range" min="0" max="1000" value="0" step="1" aria-label="ì¬ìƒ ìœ„ì¹˜" />
        <div class="timeRow">
          <span id="cur">0:00</span>
          <span id="status" style="opacity:.8;">ì²« ìŠ¤í¬ë¡¤ ì‹œ í˜ì´ë“œ ì¸</span>
          <span id="dur">0:00</span>
        </div>
      </div>

      <button class="btn" id="muteBtn" aria-label="ìŒì†Œê±°">ğŸ”Š</button>
    </div>
  </div>

  <main>
    <div class="viewer">

      <!-- ë³¸ë¬¸ ìµœìƒë‹¨ ì•ˆë‚´ ë¬¸êµ¬ -->
      <div class="notice">
        * ìŒì•…ì€ ë¸Œë¼ìš°ì € ì •ì±… ë•Œë¬¸ì— â€œì²« ìŠ¤í¬ë¡¤ / í„°ì¹˜ / í´ë¦­â€ ì´í›„ ì¬ìƒë©ë‹ˆë‹¤.<br>
        * ìƒë‹¨ í”Œë ˆì´ì–´ì—ì„œ ì¬ìƒ Â· ì •ì§€ Â· êµ¬ê°„ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
      </div>

      <!-- ì´ë¯¸ì§€ 2ì¥ -->
      <figure class="page">
        <img src="https://raw.githubusercontent.com/shri-4/1/refs/heads/main/h1.webp"
             alt="h1" loading="eager" referrerpolicy="no-referrer">
      </figure>

      <figure class="page">
        <img src="https://raw.githubusercontent.com/shri-4/1/refs/heads/main/h2.webp"
             alt="h2" loading="lazy" referrerpolicy="no-referrer">
      </figure>

    </div>

    <footer>
      <div class="links">
        <a class="link"
           href="https://crack.wrtn.ai/stories/692998656f80f8b51d32bc9a/episodes/693e912db3f465f8f6947618?autoScroll=false"
           target="_blank" rel="noopener noreferrer">
          ìµœí˜„íƒœì™€ ëŒ€í™”í•˜ëŸ¬ê°€ê¸°
        </a>

        <a class="link"
           href="https://raw.githubusercontent.com/shri-4/1/refs/heads/main/%ED%98%84%ED%83%9Cost.mp3"
           download="í˜„íƒœost.mp3">
          ìµœí˜„íƒœ í…Œë§ˆê³¡ ë‹¤ìš´ë°›ê¸°
        </a>
      </div>

      <div class="notice">
        * í…Œë§ˆê³¡ì€ sunoë¡œ ë§Œë“  ìµœí˜„íƒœ ì „ìš© í…Œë§ˆê³¡ì´ë©°, í´ë¦­ ì‹œ GitHub raw íŒŒì¼ë¡œ ë°”ë¡œ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤.
      </div>
    </footer>
  </main>

  <!-- ë°°ê²½ìŒì•… -->
  <audio id="bgm" preload="auto" loop playsinline webkit-playsinline>
    <source src="https://raw.githubusercontent.com/shri-4/1/refs/heads/main/%ED%98%84%ED%83%9Cost.mp3" type="audio/mpeg" />
  </audio>

  <script>
    const bgm = document.getElementById("bgm");
    const playBtn = document.getElementById("playBtn");
    const muteBtn = document.getElementById("muteBtn");
    const progress = document.getElementById("progress");
    const curEl = document.getElementById("cur");
    const durEl = document.getElementById("dur");
    const statusEl = document.getElementById("status");

    let userStarted = false;
    let seeking = false;

    function fmt(sec){
      sec = Math.max(0, Math.floor(sec || 0));
      const m = Math.floor(sec / 60);
      const s = String(sec % 60).padStart(2, "0");
      return `${m}:${s}`;
    }

    function setPlayUI(isPlaying){
      playBtn.textContent = isPlaying ? "â¸" : "â–¶";
      statusEl.textContent = isPlaying ? "ì¬ìƒ ì¤‘" : "ì¼ì‹œì •ì§€";
    }

    function fadeIn(ms = 1400){
      bgm.volume = 0;
      const start = performance.now();
      function step(t){
        const p = Math.min((t - start) / ms, 1);
        const eased = 1 - Math.pow(1 - p, 3);
        bgm.volume = eased;
        if (p < 1) requestAnimationFrame(step);
      }
      requestAnimationFrame(step);
    }

    async function startWithFade(){
      if (userStarted) return;
      userStarted = true;
      try{
        await bgm.play();
        fadeIn(1400);
        setPlayUI(true);
      }catch(e){
        userStarted = false;
        statusEl.textContent = "ì¬ìƒì´ ë§‰í˜”ì–´ìš”: í™”ë©´ì„ í•œ ë²ˆ í´ë¦­/íƒ­í•´ì£¼ì„¸ìš”.";
        console.warn(e);
      }
    }

    // ì²« ìŠ¤í¬ë¡¤/íœ /í„°ì¹˜ ìŠ¤í¬ë¡¤ë¡œ ì‹œì‘ (ì›¹íˆ°ì²˜ëŸ¼ ìŠ¤í¬ë¡¤í•˜ìë§ˆì)
    const first = () => startWithFade();
    window.addEventListener("wheel", first, { once:true, passive:true });
    window.addEventListener("touchmove", first, { once:true, passive:true });
    window.addEventListener("scroll", first, { once:true, passive:true });

    // ë³´í—˜: ì²« í´ë¦­/íƒ­
    window.addEventListener("click", () => { if(!userStarted) startWithFade(); }, { once:true });

    // ì¬ìƒ/ì •ì§€ ë²„íŠ¼
    playBtn.addEventListener("click", async () => {
      try{
        if (bgm.paused){
          if (!userStarted){
            userStarted = true;
            await bgm.play();
            fadeIn(900);
          }else{
            await bgm.play();
          }
          setPlayUI(true);
        }else{
          bgm.pause();
          setPlayUI(false);
        }
      }catch(e){
        statusEl.textContent = "ì¬ìƒ ì‹¤íŒ¨(ì •ì±…/ë„¤íŠ¸ì›Œí¬ í™•ì¸)";
        console.warn(e);
      }
    });

    // ìŒì†Œê±° ë²„íŠ¼
    muteBtn.addEventListener("click", () => {
      bgm.muted = !bgm.muted;
      muteBtn.textContent = bgm.muted ? "ğŸ”‡" : "ğŸ”Š";
    });

    // ì´ ê¸¸ì´
    bgm.addEventListener("loadedmetadata", () => {
      durEl.textContent = fmt(bgm.duration);
    });

    // ì§„í–‰ ì—…ë°ì´íŠ¸
    bgm.addEventListener("timeupdate", () => {
      if (!seeking){
        const p = (bgm.currentTime / (bgm.duration || 1)) * 1000;
        progress.value = String(Math.floor(p));
      }
      curEl.textContent = fmt(bgm.currentTime);
      if (bgm.duration) durEl.textContent = fmt(bgm.duration);
    });

    bgm.addEventListener("play", () => setPlayUI(true));
    bgm.addEventListener("pause", () => setPlayUI(false));

    // êµ¬ê°„ ì´ë™
    progress.addEventListener("input", () => { seeking = true; });
    progress.addEventListener("change", () => {
      const ratio = Number(progress.value) / 1000;
      const t = ratio * (bgm.duration || 0);
      if (Number.isFinite(t)) bgm.currentTime = t;
      seeking = false;
    });
  </script>
</body>
</html>
